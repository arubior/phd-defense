<section id="superpixels"
	 data-background-video="videos/chapters/chapter-gray.mp4"
         data-background-video-loop data-background-video-muted>
	<h1><p class="fragment fade-in"; style="color:white;">SUPERPIXEL SEGMENTATION</p></h1>
</section>

<section data-background-image="imgs/backgrounds/gray.png">
          <!--data-background-size="100px" data-background-repeat="repeat"-->
<h2>INTRODUCTION</h2>
</section>

<section data-background-image="imgs/backgrounds/gray-intro.png">
  <div class="r-stack">
  <p class="fragment current-visible" data-fragment-index="2" >Even small images contain lots of pixels</p>
  <p class="fragment current-visible" data-fragment-index="5" >We can cluster the data without losing information</p>
</div>
  <div class="r-stack">
  <img class="fragment fade-out" data-fragment-index="0" src="chapters/superpixels/imgs/intro/intro-01.png">
  <img class="fragment current-visible" data-fragment-index="0" src="chapters/superpixels/imgs/intro/intro-02.png">
  <img class="fragment current-visible" data-fragment-index="1" src="chapters/superpixels/imgs/intro/intro-03.png">
  <img class="fragment current-visible" data-fragment-index="2" src="chapters/superpixels/imgs/intro/intro-04.png">
  <img class="fragment current-visible" data-fragment-index="3" src="chapters/superpixels/imgs/intro/intro-05.png">
  <img class="fragment current-visible" data-fragment-index="4" src="chapters/superpixels/imgs/intro/intro-06.png">
  <img class="fragment current-visible" data-fragment-index="5" src="chapters/superpixels/imgs/intro/intro-07.png">
</div>
</section>

<section data-background-image="imgs/backgrounds/gray-intro.png">
<h3>Superpixels</h3>
<ul>
<li>Perceptually meaningful<b> <span class="fragment highlight-current-blue">clusters for pixels</span></b></li>
<li>They carry more information than pixels</li>
<li>They provide a convenient and <b><span class="fragment highlight-current-blue">compact representation of images</span></b> that can be very useful for computationally demanding problems.</li>
</ul>
<aside class="notes">
Superpixels have a perceptual meaning since pixels belonging to a given superpixel share similar visual properties.<br>
Reduce cost for subsequent tasks (like annotations, talk about other examples)<br>
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-intro.png">
<h3>Problems</h3>
<em><b>Oversegmentation</b></em> vs. <em><b>undersegmentation</b></em>
<div class="r-stack">
<span class="fragment fade-out" data-fragment-index="0">
<img src="chapters/superpixels/imgs/oversegmentation.png"; width=auto; height=300px>
<img src="chapters/superpixels/imgs/undersegmentation.png"; height="300"></span>
<span class="fragment current-visible" data-fragment-index="0">
<img src="chapters/superpixels/imgs/oversegmentation-cost.png"; width=auto; height=300px>
<img src="chapters/superpixels/imgs/undersegmentation-ss.jpg"; height="300"></span>
</div>
<aside class="notes">
Goal of SPs: reduce image complexity while respecting the boundaries, and at the same time avoid loss of info due to under-segmentation. <br>
Our goal: reduce the number of SPs without losing information by having bigger superpixels in regions with less information.<br>
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-intro.png">
<h3>Boundary-Aware Superpixel Segmentation (BASS)</h3>
  <div class="r-stack">
  <img class="fragment fade-out" data-fragment-index="0" src="chapters/superpixels/imgs/first/first1.png">
  <img class="fragment current-visible" data-fragment-index="0" src="chapters/superpixels/imgs/first/first2.png">
  <img class="fragment current-visible" data-fragment-index="1" src="chapters/superpixels/imgs/first/first3.png">
</div>
</section>

<section data-background-image="imgs/backgrounds/gray-intro.png">
	<h3>CONTRIBUTIONS</h3>
	<ul>
	<li>New boundary-aware <b><span class="fragment highlight-current-blue">initialization method</span></b> for superpixel centers</li>
	<li><b><span class="fragment highlight-current-blue">New energy function</span></b> (color, Euclidean + geodesic distances)</li>
	<li>Exhaustive <span class="fragment highlight-current-blue">evaluation</span> (7 datasets with 3 metrics)</li>
	<li>Better VOI than SoA with similar UE and BR</li>
	</ul>
</section>

<section data-background-image="imgs/backgrounds/gray.png">
	<h2>RELATED WORK</h2>
</section>

<section data-background-image="imgs/backgrounds/gray-related.png">
	<h3>Graph-based</h3>
	<img class="r-stretch" src="chapters/superpixels/imgs/graph.png">
<ul>
<li>Excessive uniformity</li>
<li>Tendency to produce small contours</li>
<li>Computational cost</li>
</ul>
</section>
	<aside class="notes">
	pixel are nodes, edges are similarities<br>
	memory has been optimized, but excessive uniformity between superpixels due to their tendency to produce small contours<br>
	</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-related.png">
	<h3>Coarse-to-fine methods</h3>
	<img data-src="chapters/superpixels/imgs/coarse.png">
<ul>
<li>Focused on producing regular superpixels with similar sizes</li>
</ul>
<aside class="notes">
start from a regular grid and iteratively warp until reaching a termination condition<br>
focused on producing regular superpixels with similar sizes<br>
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-related.png">
	<h3>Seed-growing</h3>
	<img class="r-stretch" src="chapters/superpixels/imgs/seeds_spx.png"; height=300px>
<ul>
<li>Superpixels created from initial positions (seeds)</li>
<li>Our method lies in this category, but favors reducing the number of superpixels maintaining the quality</li>
</ul>
<aside class="notes">
SLIC<br>
superpixels created from initial positions<br>
more efficient than graph-based, but not always better performance<br>
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray.png">
<h2>METHOD</h2>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Overview</h3>
  <div class="r-stack">
  <img class="fragment fade-out" data-fragment-index="0" src="chapters/superpixels/imgs/scheme/scheme1.png">
  <img class="fragment current-visible" data-fragment-index="0" src="chapters/superpixels/imgs/scheme/scheme2.png">
  <img class="fragment current-visible" data-fragment-index="1" src="chapters/superpixels/imgs/scheme/scheme3.png">
  <img class="fragment current-visible" data-fragment-index="2" src="chapters/superpixels/imgs/scheme/scheme4.png">
  <img class="fragment current-visible" data-fragment-index="3" src="chapters/superpixels/imgs/scheme/scheme5.png">
  <img class="fragment current-visible" data-fragment-index="4" src="chapters/superpixels/imgs/scheme/scheme6.png">
  <img class="fragment current-visible" data-fragment-index="5" src="chapters/superpixels/imgs/scheme/scheme7.png">
  <img class="fragment current-visible" data-fragment-index="6" src="chapters/superpixels/imgs/scheme/scheme8.png">
  <img class="fragment current-visible" data-fragment-index="7" src="chapters/superpixels/imgs/scheme/scheme9.png">
  <img class="fragment current-visible" data-fragment-index="8" src="chapters/superpixels/imgs/scheme/scheme10.png">
</div>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Boundary detection</h3>
<img data-src="chapters/superpixels/imgs/boundaries_a.png"; width=auto; height=300px>
<img data-src="chapters/superpixels/imgs/boundaries_b.png"; width=auto; height=300px>
<p>Edge detection result binarized to use top 70% most intense boundaries</p>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Seeds initialization</h3>
<div class="container">
  <video data-autoplay loop src="chapters/superpixels/videos/seeds-square.mp4"; height=450px></video>
  <div class="container__text">
<font size="6">
<ul ul style="list-style-type:none;">
<li><p class="fragment">1. Regularly distribute the initial seeds in a grid with side $S = \sqrt{N/K}$</p></li>
<li><p class="fragment">2. Based on edge density inside each $S\times S$ region, add or delete seeds</p></li>
<li><p class="fragment">3. Place seeds in the centroid of empty regions larger than $S\times S$</p></li>
</ul>
</font>
  </div>
</div>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Seeds initialization</h3>
<img data-src="chapters/superpixels/imgs/seeds/cafe.png"; width=auto; height="300">
<img data-src="chapters/superpixels/imgs/seeds/cartel.png"; width=auto; height="300">
<img data-src="chapters/superpixels/imgs/seeds/img2.png"; width=auto; height="300">
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
A seed is just a 5-dimensional vector with average values of all the pixels belonging to superpixel $k$
  <div class="r-stack">
  <img class="fragment fade-out" data-fragment-index="0" src="chapters/superpixels/imgs/seedeq/seedeq1.png">
  <img class="fragment current-visible" data-fragment-index="0" src="chapters/superpixels/imgs/seedeq/seedeq2.png">
  <img class="fragment current-visible" data-fragment-index="1" src="chapters/superpixels/imgs/seedeq/seedeq3.png">
  <img class="fragment current-visible" data-fragment-index="2" src="chapters/superpixels/imgs/seedeq/seedeq4.png">
</div>
<aside class="notes">
This color space represents the color as three real values: L for lightness from 0 (black) to 100 (white), a from green to red
and b from blue to yellow (values of a and b are implementation-specific, but are normally in the range of -100 to +100 or -128 to +127).
It was designed to approximate the human perception, which makes it perfect for the task of superpixel segmentation, since we want our superpixels to be visually meaningful.
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Energy function</h3>
  <div class="r-stack">
  <img class="fragment fade-out" data-fragment-index="0" src="chapters/superpixels/imgs/energy/energyeq1.png">
  <img class="fragment current-visible" data-fragment-index="0" src="chapters/superpixels/imgs/energy/energyeq2.png">
  <img class="fragment current-visible" data-fragment-index="1" src="chapters/superpixels/imgs/energy/energyeq3.png">
  <img class="fragment current-visible" data-fragment-index="2" src="chapters/superpixels/imgs/energy/energyeq4.png">
</div>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Energy functions</h3>
\begin{equation}
E_{lab} = dist\left((l_k, a_k, b_k), (l_i, a_i, b_i)\right)
\end{equation}
\begin{equation}
E_{xy} = dist\left((x_k, y_k), (x_i, y_i)\right)
\end{equation}
<aside class="notes">
This color space represents the color as three real values: L for lightness from 0 (black) to 100 (white), a from green to red
and b from blue to yellow (values of a and b are implementation-specific, but are normally in the range of -100 to +100 or -128 to +127).
It was designed to approximate the human perception, which makes it perfect for the task of superpixel segmentation, since we want our superpixels to be visually meaningful.
</aside>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Energy functions</h3>
$E_{geo}$: Distance Transform on Curved Spaces
<img data-src="chapters/superpixels/imgs/geo1.png"; width=600px; height=auto>
<img data-src="chapters/superpixels/imgs/geo2.png"; width=600px; height=auto>
</section>

<section id="compactness"
	 data-background-image="imgs/backgrounds/gray-method.png">
<h3>Compactness term</h3>
<img data-src="chapters/superpixels/imgs/compactness/energy.png"><br>
<img data-src="chapters/superpixels/imgs/compactness/dress.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/1.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/5.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/10.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/15.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/20.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/50.png"; width=auto; height=210px>
<img data-src="chapters/superpixels/imgs/compactness/100.png"; width=auto; height=210px>
</section>

<section data-background-image="imgs/backgrounds/gray-method.png">
<h3>Energy functions</h3>
<img data-src="chapters/superpixels/imgs/energy/original2.png"; width=auto; height=380px>
<img data-src="chapters/superpixels/imgs/energy/energy_lab2.png"; width=auto; height=380px>
<img data-src="chapters/superpixels/imgs/energy/energy_xy2.png"; width=auto; height=380px>
<img data-src="chapters/superpixels/imgs/energy/energy_geo2.png"; width=auto; height=380px>
</section>

<section data-background-image="imgs/backgrounds/gray.png">
<h2>Datasets</h2>
</section>

<section data-background-image="imgs/backgrounds/gray-dataset.png">
<ul>
<li>Fashionista (Yamaguchi et al., CVPR 2012)</li>
<li>BSD (Martin et al., ICCV 2001)</li>
<li>HorseSeg (Kolesnikov et al., ECCV 2014)</li>
<li>DogSeg (Kolesnikov et al., ECCV 2014)</li>
<li>MSRA Salient (Liu et al., PAMI 2011)</li>
<li>CSSD (Yan et al., arXiv preprint 2014)</li>
<li>ECSSD (Yan et al., arXiv preprint 2014)</li>
</ul>
</section>

<section data-background-image="imgs/backgrounds/gray-dataset.png">
<img data-src="chapters/superpixels/imgs/datasets/1.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/2.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/3.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/4.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/5.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/6.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/7.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/8.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/9.JPEG"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/10.JPEG"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/11.JPEG"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/12.JPEG"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/13.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/15.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/16.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/17.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/18.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/19.jpg"; width=auto; height=130px>
<img data-src="chapters/superpixels/imgs/datasets/20.jpg"; width=auto; height=130px>
</section>

<section data-background-image="imgs/backgrounds/gray.png">
<h2>Results</h2>
</section>

<section data-background-image="imgs/backgrounds/gray-results.png">
<h3>Compared methods</h3>
<ul>
<li>Boundary-Aware Superpixel Segmentation (BASS)</li>
<li>SEEDS (Van den Bergh, IJCV 2015)</li>
<li>SLIC (Achanta et al., PAMI 2012)</li>
<li>Yao et al. (CVPR 2015)</li>
</ul>
</section>

<section data-background-image="imgs/backgrounds/gray-results.png">
<h3>Metrics</h3>
<ul>
<li>Variation of Information (VOI)</li>
<ul>
<li>Measures how similar two clusterings are</li>
</ul>
<li>Undersegmentation Error (UE)</li>
<li>Boundary Recall (BR)</li>
<ul>
<li>$BR = \frac{TP}{TP + FN}$</li>
</ul>
</ul>
</section>

<section data-background-image="imgs/backgrounds/gray-results.png">
<ul>
<li>Significant improvement in VOI, the most relevant metric for our goal</li>
<li>UE and BR values in pair with the SoA</li>
</ul>
<img data-src="chapters/superpixels/imgs/formulas-01.png"; width=auto; height=320px>
<img data-src="chapters/superpixels/imgs/formulas-02.png"; width=auto; height=320px>
<img data-src="chapters/superpixels/imgs/formulas-03.png"; width=auto; height=320px>
</section>

<section data-background-image="imgs/backgrounds/gray-results.png">
<img data-src="chapters/superpixels/imgs/results1.png">
</section>
<section data-background-image="imgs/backgrounds/gray-results.png">
<img data-src="chapters/superpixels/imgs/results2.png">
</section>

<section data-background-image="imgs/backgrounds/gray.png">
<h2>Summary</h2>
<ul>
<li>Over-segmentation algorithm to compute superpixels <span class="fragment highlight-current-blue">aware of the boundary information</span></li>
<li>Formulated as an <span class="fragment highlight-current-blue">iterative clustering</span> problem using color, Euclidean and geodesic distance</li>
<li><span class="fragment highlight-current-blue">Evaluated against 3 SoA methods</span> in 7 datasets</li>
<li>Our algorithm <span class="fragment highlight-current-blue">outperforms SoA methods</span> in the most significant metric according to our goal</li>
<li>Implemented in C++, runs on CPU in <span class="fragment highlight-current-blue">~0.5 secs/img</span></li>
<li>Code <span class="fragment highlight-current-blue">publicly available</span></li>
</ul>
</section>